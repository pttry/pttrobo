---
title: "Esimerkki kuvaajien piirtämisestä"
output: html_document
---

```{r, include = FALSE, message = FALSE}
library(pttrobo)
library(tidyverse)
```

```{r, message = FALSE}
# alustetaan piirtäjä
piirtaja <- pttrobo::ptt_plot()

# piirrettävä data (esimerkin vuoksi, otettu sekä kausitasoitettu että trendisarja)
df <- robonomistClient::data("StatFin/kan/ntp/statfin_ntp_pxt_132h.px") %>%
  filter(str_detect(Taloustoimi, "B1GMH")) %>%
  filter(Tiedot %in% c("Kausitasoitettu ja työpäiväkorjattu sarja, viitevuosi 2015, miljoonaa euroa",
                       "Trendisarja, viitevuosi 2015, miljoonaa euroa")) %>%
  robonomistServer::tidy_auto()

#https://www.ptt.fi/layout/img/ptt-logo.pn

# lines funktion avulla voi piirtää useamman sarjan "grouping_variable" hyödyntäen
piirtaja$lines(df, grouping_variable = Tiedot, title = "BKT", subtitle = "Vertailu kausitasoitettuun sarjaan", lahde = "Tilastokeskus", yksikko = "€")

# yksittäinen sarja voidaan piirtää funktion "line" avulla
piirtaja$line(df %>% filter(Tiedot == "Kausitasoitettu ja työpäiväkorjattu sarja, viitevuosi 2015, miljoonaa euroa"), title = "BKT", lahde = "Tilastokeskus")

```
